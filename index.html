<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Eligibility Checker - University of Mines and Technology</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-2xl mx-auto space-y-8">
        <div class="bg-white shadow-xl rounded-lg p-6">
            <h1 class="text-2xl font-bold text-center text-gray-900 mb-2">Course Eligibility Checker</h1>
            <p class="text-center text-gray-600 mb-6">University of Mines and Technology</p>
            
            <div class="space-y-6">
                <div>
                    <label for="program" class="block text-sm font-medium text-gray-700 mb-1">Select your program:</label>
                    <select id="program" class="w-full p-2 border border-gray-300 rounded-md">
                        <option value="">Choose a program</option>
                        <option value="General Science">General Science</option>
                        <option value="General Arts">General Arts</option>
                        <option value="Business">Business</option>
                    </select>
                </div>

                <div id="electivesContainer" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Select your electives:</label>
                    <div id="electivesList" class="space-y-2"></div>
                </div>

                <button id="checkEligibility" class="w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600 disabled:bg-gray-400" disabled>Check Eligibility</button>

                <div id="messageContainer" class="mt-4 hidden">
                    <p id="message" class="text-sm text-gray-700"></p>
                    <ul id="eligibleCoursesList" class="mt-2 space-y-2"></ul>
                </div>
            </div>
        </div>

        <div id="courseDetailsCard" class="bg-white shadow-xl rounded-lg p-6 hidden">
            <h2 id="selectedCourseTitle" class="text-xl font-bold text-gray-900 mb-2"></h2>
            <p id="courseRequirements" class="text-gray-600 mb-4"></p>
        </div>
    </div>

    <script>
        const programs = ["General Science", "General Arts", "Business"];

        const electives = {
            "General Science": ["Physics", "Chemistry", "Elective Mathematics", "Biology", "Geography", "Applied Electricity", "Technical Drawing", "Metal Work"],
            "General Arts": ["Economics", "Geography", "Elective Mathematics", "ICT", "History", "Government"],
            "Business": ["Accounting", "Business Management", "Economics", "Costing", "ICT", "Elective Mathematics"]
        };

        const courseRequirements = {
            "BSc Mining Engineering": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Physics", "Chemistry", "Elective Mathematics"],
                program: "General Science"
            },
            "BSc Minerals Engineering": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Physics", "Chemistry", "Elective Mathematics"],
                program: "General Science"
            },
            "BSc Geomatic Engineering": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Physics", "Elective Mathematics", "Chemistry or Geography"],
                program: "General Science"
            },
            "BSc Geological Engineering": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Physics", "Chemistry", "Elective Mathematics"],
                program: "General Science"
            },
            "BSc Environmental and Safety Engineering": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Physics", "Chemistry", "Elective Mathematics"],
                program: "General Science"
            },
            "BSc Land Administration and Information Systems": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Any three from: Economics, Geography, Elective Mathematics, ICT, History, Government"],
                program: "General Arts"
            },
            "BSc Spatial Planning": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Any three from: Economics, Geography, Elective Mathematics, ICT, History, Government"],
                program: "General Arts"
            },
            "BSc Computer Science and Engineering": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Elective Mathematics", "Physics", "Chemistry or ICT or Applied Electricity"],
                program: "General Science"
            },
            "BSc Mathematics": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Elective Mathematics", "Any two from: Physics, Chemistry, Biology, Applied Electricity, Technical Drawing, ICT, Metal Work, Economics, Geography, Accounting, Business Management, Costing"],
                program: "Any"
            },
            "BSc Statistical Data Science": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Elective Mathematics", "Any two from: Physics, Chemistry, Biology, Applied Electricity, Technical Drawing, ICT, Metal Work, Economics, Geography, Accounting, Business Management, Costing"],
                program: "Any"
            },
            "BSc Cyber Security": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Any three from: Physics, Chemistry, Biology, Geography, ICT, Elective Mathematics, Economics, Accounting, Business Management, Costing"],
                program: "Any"
            },
            "BSc Information Systems and Technology": {
                core: ["English Language", "Mathematics", "Integrated Science"],
                electives: ["Any three from: Physics, Chemistry, Biology, Geography, ICT, Elective Mathematics, Economics, Accounting, Business Management, Costing"],
                program: "Any"
            },
            "BSc Logistics and Transport Management": {
                core: ["English Language", "Mathematics", "Integrated Science or Social Studies"],
                electives: ["Any three from the program"],
                program: "Any"
            },
            "BSc Economics and Industrial Organization": {
                core: ["English Language", "Mathematics", "Integrated Science or Social Studies"],
                electives: ["Economics and/or Elective Mathematics", "Any one or two from the program"],
                program: "Any"
            }
        };

        const programSelect = document.getElementById('program');
        const electivesContainer = document.getElementById('electivesContainer');
        const electivesList = document.getElementById('electivesList');
        const checkEligibilityBtn = document.getElementById('checkEligibility');
        const messageContainer = document.getElementById('messageContainer');
        const message = document.getElementById('message');
        const eligibleCoursesList = document.getElementById('eligibleCoursesList');
        const courseDetailsCard = document.getElementById('courseDetailsCard');
        const selectedCourseTitle = document.getElementById('selectedCourseTitle');
        const courseRequirementsText = document.getElementById('courseRequirements');

        let selectedElectives = [];

        programSelect.addEventListener('change', function() {
            const selectedProgram = this.value;
            if (selectedProgram) {
                electivesContainer.classList.remove('hidden');
                populateElectives(selectedProgram);
            } else {
                electivesContainer.classList.add('hidden');
            }
            resetEligibility();
        });

        function populateElectives(program) {
            electivesList.innerHTML = '';
            selectedElectives = [];
            electives[program].forEach(elective => {
                const div = document.createElement('div');
                div.className = 'flex items-center';
                div.innerHTML = `
                    <input type="checkbox" id="${elective}" class="mr-2">
                    <label for="${elective}" class="text-sm text-gray-700">${elective}</label>
                `;
                electivesList.appendChild(div);

                const checkbox = div.querySelector('input');
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        selectedElectives.push(elective);
                    } else {
                        selectedElectives = selectedElectives.filter(e => e !== elective);
                    }
                    updateCheckEligibilityButton();
                });
            });
        }

        function updateCheckEligibilityButton() {
            checkEligibilityBtn.disabled = !(programSelect.value && selectedElectives.length > 0);
        }

        checkEligibilityBtn.addEventListener('click', checkEligibility);

        function checkEligibility() {
            const selectedProgram = programSelect.value;
            const eligibleCourses = Object.entries(courseRequirements).filter(([course, requirements]) => {
                if (requirements.program !== "Any" && requirements.program !== selectedProgram) {
                    return false;
                }
                
                if (requirements.electives[0] === "Any three from the program") {
                    return selectedElectives.length >= 3;
                }

                if (requirements.electives[0].startsWith("Any three from:")) {
                    const allowedElectives = requirements.electives[0].split(":")[1].split(",").map(e => e.trim());
                    return selectedElectives.filter(e => allowedElectives.includes(e)).length >= 3;
                }

                const requiredElectives = requirements.electives.flatMap(e => e.split(" or "));
                const hasRequiredElectives = requiredElectives.every(e => {
                    if (e.startsWith("Any two from:")) {
                        const allowedElectives = e.split(":")[1].split(",").map(e => e.trim());
                        return selectedElectives.filter(se => allowedElectives.includes(se)).length >= 2;
                    }
                    return selectedElectives.includes(e) || e === "Any one or two from the program";
                });

                return hasRequiredElectives;
            }).map(([course]) => course);

            displayEligibilityResults(eligibleCourses);
        }

        function displayEligibilityResults(eligibleCourses) {
            messageContainer.classList.remove('hidden');
            if (eligibleCourses.length === 0) {
                message.textContent = "Based on your selections, you are not eligible for any courses. Please review the entry requirements and try again.";
                eligibleCoursesList.innerHTML = '';
            } else {
                message.textContent = "You are eligible for the following courses:";
                eligibleCoursesList.innerHTML = eligibleCourses.map(course => `
                    <li>
                        <button class="w-full text-left p-2 bg-gray-100 hover:bg-gray-200 rounded" onclick="showCourseDetails('${course}')">
                            ${course}
                        </button>
                    </li>
                `).join('');
            }
            courseDetailsCard.classList.add('hidden');
        }

        function showCourseDetails(course) {
            selectedCourseTitle.textContent = course;
            const requirements = courseRequirements[course];
            courseRequirementsText.innerHTML = `
                <strong>Core Subjects:</strong> ${requirements.core.join(", ")}<br>
                <strong>Elective Subjects:</strong> ${requirements.electives.join(", ")}<br>
                <strong>Program:</strong> ${requirements.program}
            `;
            courseDetailsCard.classList.remove('hidden');
        }

        function resetEligibility() {
            messageContainer.classList.add('hidden');
            courseDetailsCard.classList.add('hidden');
            checkEligibilityBtn.disabled = true;
        }
    </script>
</body>
</html>